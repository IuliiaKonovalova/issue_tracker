{% extends "base.html" %}
{% block extra_css %}
<style>
  .bg {
    height: unset;
    background-image: linear-gradient(#1c2431a9,
        #1c2431a9),
      url('/static/media/bg7.svg');
    background-position: center top;
  }
</style>
{% endblock %}
{% block content %}
<div class="profile__details">
  <h2 class="profile__title">Your Profile</h2>
  <section class="profile__header">
    <h3 class="profile__header--descriptions">
      <span>Username: </span>
      {{ user_profile.username }}
    </h3>
    <h3 class="profile__header--descriptions">
      <span>Email: </span>
      {{ user_profile.email }}
    </h3>
  </section>
  <section class="profile__statistics">
    <h3 class="profile__statistics--title">Statistics</h3>
    <div class="profile__statistics--container">
      <div class="profile__statistics--column">
        <div class="profile__statistics--projects">
          <h4 class="profile__statistics--subtitle">Projects</h4>
          <div class="profile__statistics--block">
            Created: {{ user_profile.projects.all.count}}
          </div>
          <div class="profile__statistics--block">
            Collaborated: {{ user_profile.collaborated_projects.all.count }}
          </div>
        </div>
      </div>

      <div class="profile__statistics--column">
        <div class="profile__statistics--issues">
          <h4 class="profile__statistics--subtitle">Issues</h4>
          <div class="profile__statistics--block">
            Created: {{ user_profile.issues.all.count }}
          </div>
          <div class="profile__statistics--block">
            Assigned: {{ user_profile.assigned_issues.all.count }}
          </div>
        </div>
      </div>
      <div class="profile__statistics--column">
        <h4 class="profile__statistics--subtitle">Comments</h4>
        <div class="profile__statistics--block">
          Comments left: {{ user_profile.written_comments.all.count }}
        </div>
      </div>

    </div>

  </section>
  <h2>Projects:</h2>
  <ul>

    {% for project in user_profile.projects.all %}

    <li>{{ project.title }}</li>

    {% endfor %}

  </ul>
  <h2>Issues:</h2>
  <ul>
    {% for issue in user_profile.issues.all %}
    <li>{{ issue.title }}</li>
    {% endfor %}

  </ul>

  <h2>Assigned issues:</h2>
  <ul>
    {% for issue in user_profile.assigned_issues.all %}
    <li>{{ issue.title }}</li>
    {% endfor %}

  </ul>
  <h2>Comments:</h2>
  <ul>
    {% for comment in user_profile.written_comments.all %}
    <li>{{ comment.comment_body }}</li>
    {% endfor %}
  </ul>

  {% if password_form %}
  <form method="post">
    {{ password_form|crispy }}
    {% csrf_token %}
    <button type="submit">Change password</button>
  </form>
</div>
{% endif %}

{% endblock %}